# 网络信息基础

## OSI五层模型
1. 应用层
    **软件交互**
2. 传输层
    > 物理硬件:四层交换机,四层路由器
    **建立端口到端口的通信**
        *提供软件的通信接口*
        *端口范围:0-65545,0-1023为系统占用端口*
    **tcp协议**
        *可靠传输:三次握手/四次挥手*
        *数据包没有长度限制*
        *为确保网络效率,数据包不会超过ip数据包长度*
            * 分成两个部分
                |tcp头|20字节+选项和填充部|
                |数据 |      不定长      |
                    * tcp报文
                        <序号></包的序号>
                        <确认号></若收包,则在收到的序号+1返回>
                        <数据偏移></标志数据相对于开始的偏移>
                        <标志位></显示包的状态>
                            |URG:优先处理|ACK:确认请求|PBH|RST|SYN:链接请求|FIN:断开请求|
                        <窗口></规定发送接受包的尺寸>
                    |<--------------32bit----------->|
                    |     本机端口     |     目标端口   |
                    |                序号             |
                    |               确认号            |
                    |数据偏移|保留|标志位|      窗口     |
                    |      校验和      |    紧急指针    |
                    |             选项和填充           |
                    |----------------数据-------------|
    **udp协议**
        *不可靠传输*
        *总长度65535字节,正好一个ip数据包*
            * 分成两个部分
                |udp头|8字节|
                |数据|65527字节|
    **socket(套接字):抽象层**
        *将tcp/ip复杂操作抽象为简单接口,供应用层实现网络通信*
        *简化学习成本*
3. 网络层
    > 物理硬件:路由器,三层交换机
    **区分广播域/子网**
    **IP协议**
        *规定网络的地址的叫ip地址,有ipv4和ipv6之分*
        *Ipv4:32位2进制*
            * 范围:0.0.0.0-255.255.255.255
            * 写作(点分十进制):172.168.0.1
            * 分成两个部分(长度不定)
                |网络部分|标示子网|
                |主机部分|标示主机|
        *子网掩码*
            * 表示子网特征的参数.形式等同于ip地址
            * 网络部分全为1,主机部分全为0
            * 两个ip和子网掩码分别按位与,比较结果:若相同则在同一子网中
        *特殊ip地址*
            ~~不可使用~~
            * 网络地址
            * 广播地址
            * 有限广播地址
            * 回环地址
            * 私有地址
            * 0.0.0.0    
        *ip数据包*
            * 由于数据链路层的以太网协议长度限制,所以ip数据包(head+data)最多1500字节
            * 分为head和data
                |head|长度20-60|
                |data|最长65515|
    **ARP协议**
        *获取目标主机的mac地址*
        *工作方式*
            1. 通过ip地址和子网掩码区分目标和本身的子网
                * 同一子网,获取目标mac和ip
                * 不同子网,获取网关mac和ip
            2. 分析是否处于同一网络,否则获取目标网关mac(通过路由)
                发送:|数据|发送端mac|(目标端mac)FF:FF:FF:FF:FF:FF|源IP|目标IP|数据|
            3. 目标主机返回网关mac,开始广播
4. 数据链路层
    > 物理硬件:网桥,以太网交换机,网卡
    **定义电信号分组方式(以太网协议ethernet)**
        *一组电信号构成一个数据包,叫做帧*
        *每一组数据:报头head+数据data两部分*
            *最长一组1518字节,超过则分片发送*
            * 报头包含(18字节):
                |发送者/源地址 |6字节|
                |接收者/目标地址|6字节|
                |数据类型      |6字节|
            * 数据包含(最短46字节,最长1500字节):
                |数据包内容|
    **mac地址**
        *ethernet规定接入internet的所有设备必须有网卡,发送/接受端地址即mac(网卡)地址*
        *世界上唯一,长度为12位16进制数(前6位-厂商编号,后6位流水线号)*
    **广播**
        *通过IEEE协议,向同一网络的所有计算机发送信息*
        *拆取数据包获得mac地址来实现通信*
5. 物理层
    > 物理硬件:中继器,集线器,双绞线
    **定义逻辑数据:高电位1,低电位0**

## 网络通信实现
**四要素**
> 1. 本机IP地址
> 2. 子网掩码
> 3. 网关IP
> 4. DNS的IP
**获取方式**
1. 静态获取,手动配置
2. 动态获取
    * dhcp协议获取
        计算机----->dhcp服务器 获取
        |以太网头(本机mac_对方mac"FF:FF:FF:FF:FF:FF")|
        |ip头(本机ip"0.0.0.0"_对方ip"255.255.255.255")|
        |udp头(本机接口"68"_对方接口"67"|
        |dhcp数据包(返回时:请求方的具体参数)|

## URL系统
**统一资源定位符**
**通过DNS解析为ip地址和端口号**
* uri地址: https://www.github.com/cangSDRAM
* url地址: https://www.github.com
> 1. 协议部分:https://
> 2. 域名部分:www.github.com
>    * 根域:美国10台,欧洲2台,日本1台(udp限制)
>    * 顶级域:com,cn,org,net
>    * 一级域:baidu,github,google
>    * 二级域:www,wap
> 3. 资源部分:/cangSDRAM
